<script lang="ts">
	import Swiper from "../../../../components/Swiper.svelte";
	import { getRecipes } from "$lib/api/auth-request";
	import { Price, Difficulty } from "$lib/api/recipe-types";
	import { coldstartLiked } from "../../../../store";
	import { onMount } from "svelte";
	import type { PageData } from "../$types";

	export let data: PageData;

	let answers: number[] = [];

	console.log(data);

	/*    async function getRecipesByPreferences() {
		jsonRecipes = await getRecipes(
			"",
			Price[answers[1]],
			Difficulty[answers[2]],
			0
		);
		recipes = jsonRecipes.result;
		if (recipes.length < 4) {
			jsonRecipes = await getRecipes("", Price[answers[1]], "", 0);

			recipes = jsonRecipes.result;
		}
	};  */
</script>

<h2>
	Pour finir, fait nous savoir ce que tu aimes en choisissant
	<span class="highlight">au moins 3</span>
	recettes.
</h2>

<!-- faire le swiper selon les recipesbypreferences -->
<Swiper recipes={data.recipes} />

<!-- en invisible, mettre les rÃ©ponses pour les avoir dans le body -->
<input type="hidden" name="price" value={data.price} />
<input type="hidden" name="difficulty" value={data.difficulty} />
<input type="hidden" name="liked" value={$coldstartLiked} />

<button
	class="button"
	on:click={() => {}}
	type="submit"
	disabled={$coldstartLiked.length < 3}
>
	<span>Terminer</span>
</button>
